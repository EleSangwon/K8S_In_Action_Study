# Chapter9 디플로이먼트: 애플리케이션을 선언적으로 업데이트하기 P377~

```
이 장에서는 쿠버네티스 클러스터에서 애플리케이션을 업데이트하는 방법과 진정한 다운타임이 없는 
업데이트 프로세스를 위해 쿠버네티스가 도움을 줄 수 있는 부분에 대해 설명한다.
```

## 포드에서 실행 중인 애플리케이션 업데이트
```
모든 포드를 업데이트하는 두 가지 방법이 있다.
- 기존의 모든 포드를 삭제한 후, 새로운 포드 시작

- 새로운 것을 시작하고, 일단 끝나면 오래된 것을 지운다. 
모든 새로운 포드를 추가한 다음 한 번에 모든 기존 포드를 삭제하거나 순차적으로 새 포드를 추가하고
점차 오래된 포드를 제거할 수 있다.

첫 번째 옵션은 애플리케이션을 사용할 수 없는 짧은 시간이 발생한다.

두 번쨰 옵션은 애플리케이션에서 두 가지 버전의 애플리케이션 실행을 동시에 처리해야 한다.
애플리케이션에서 데이터를 데이터 스토리지에 저장하는 경우 새 버전은 이전 버전을 손상하는 방식으로 
데이터 스키마 또는 데이터를 수정해서는 안된다.
```
![캡처1](https://user-images.githubusercontent.com/50174803/131881152-7fa87f7b-41e2-47fc-8b63-04edc784df38.jpg)

## 오래된 포드를 삭제하고 새로운 포드로 교체
![캡2](https://user-images.githubusercontent.com/50174803/131881592-fde5c8ff-2b86-44d0-aa06-46936bc930df.jpg)


## 새 포드의 스핀업 및 오래된 포드 삭제
```
어떤 다운타임도 바라지 않고 애플리케이션이 동시에 여러 버전의 실행을 지원한다면 해당 프로세스로 먼저
전환하고 모든 새 포드를 스핀업한 다음 이전 포드만 삭제한다.

이를 위해서는 더 많은 하드웨어 리소스가 필요하다. 왜냐하면 짧은 시간 동안 한 번에 두 배의 포드가 
실행돼야 하기 때문이다.
```
![캡3](https://user-images.githubusercontent.com/50174803/131881960-bced98fd-df1a-44a4-9354-66b188b334e1.jpg)


## 롤링 업데이트
```
새 포드를 모두 가져오고 한 번에 이전 포드를 삭제하는 대신 포드를 단계적으로 대체하는 롤링 업데이트를
수행할 수 있다.

수동 롤링 업데이트는 힘들고 오류가 발생하기 쉽다. 복제본의 수에 따라 업데이트 프로세스를
수행하기 위해 많은 명령을 실행해야 한다. 쿠버네티스에서는 하나의 명령으로 롤링 업데이트를 수행할 수 있다.
```
![캡4](https://user-images.githubusercontent.com/50174803/131882294-dff1cd74-0421-4c96-a26b-4ef3721f2223.jpg)
















