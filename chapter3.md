# Chapter3 포드: 쿠버네티스에서 컨테이너 실행하기 P109~ 

## 파드
```
파드는 컨테이너의 공동의 배포된 그룹이며, 쿠버네티스의 기본 빌딩 블록을 대표

파드의 핵심은 파드에 여러 컨테이너가 포함돼 있을 때 항상 파드 전부가
단일의 워커 노드에서 실행된다는 것이다.
```
![캡처1](https://user-images.githubusercontent.com/50174803/128146239-0a24bf00-a604-499d-b949-db4b99ae1355.jpg)

## 여러 프로세스를 실행할 때 한 개의 컨테이너보다 다수의 컨테이너가 적합한 이유
```
컨테이너는 프로세스 자체가 하위 프로세스를 생성하지 않는 한 컨테이너 당 하나의
프로세스만 실행하도록 설게됐다.

관련 없는 여러 프로세스를 하나의 컨테이너에서 실행하는 경우 모든 프로세스를
실행 상태로 유지하고 로그를 관리하는 것은 사용자의 책임이다.

충돌 발생, 충돌 발생 시 프로세스 자동 시작 매커니즘, 어떤 프로세스가 어떤 내용을 
기록했는 지 등등의 이유 떄문에 각각의 프로세스를 자체 컨테이너에서 실행해야 한다.
```

## 다수의 포드로 멀티티어 애플리케이션 분할하기
```
두 개의 컨테이너가 있는 단일 포드에서 프론트 서버와 DB 모두 실행되도록 할 수 있지만
좋은 방법은 아니다.

둘 다 동일한 포드에 있으면 항상 동일한 시스템에서 실행된다.

+ 여기부터는 책의 말을 나의 말로 풀어씀

쿠버네티스 클러스터 안에 두 개의 노드 A,B가 있다고 하자. 단일 포드 P 에
포론트엔드 컨테이너와 데이터베이스 컨테이너 ( 멀티 컨테이너 )가 있다면 
P는 A 아니면 B 에 스케줄링 될 것이다. 

만약 P를 P1 - 프론트엔트 컨테이너, P2 - 데이터베이스 컨테이너로 분할하면
쿠버네티스는 P1을 노드 A에 배치하고 P2를 노드 B에 배치하므로 
인프라의 활용도가 향상된다.
```

## 각각 스케일링 가능한 파드로 분할하기
```
하나의 파드에 두 가지를 넣지 말아야 하는 또 다른 이유는 스케일링이다.
파드는 스케일링의 기본 단위이다.

쿠버네티스는 개별 컨테이너를 수평으로 스케일아웃할 수 없기 때문에 
전체 포드의 크기를 조정한다.

파드가 프론트 컨테이너 . 백엔드 컨테이너로 구성된 경우 파드 인스턴스 수를
늘리게 되면 두 개의 프론트, 백엔드 컨테이너로 구성된다.
```

![캡처2](https://user-images.githubusercontent.com/50174803/128155366-3e6286d8-8cc2-4868-ad52-9efea4c57586.jpg)

## 명령어 

### 파드 목록에 새로 생성된 파드 보기
```
kubectl get pods 
```

### 애플리케이션 로그 보기
```
kubectl logs <pod-name>
```

### 컨테이너 이름 지정해 다중 컨테이너 파드의 로그 가져오기
```
Pod 의 이름이 sangwon-pod 이고, container 의 이름이 sangwon-container1 인 경우
kubectl logs sangwon-pod -c sangwon-container1
```

### 파드에 요청 보내기 - 포트 포워딩
```
kubectl port-forward sangwon-pod 8080:8080
```

## 라벨
```
쿠버네티스의 모든 리소스를 구성하는 간단하면서도 강력한 쿠버네티스의 기능이다.
라벨은 리소스에 첨부하는 임의의 키/값 쌍이다.
 
```
